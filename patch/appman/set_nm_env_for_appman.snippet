
/*
 * appman/appman_controller.c:
 *
 * in function appman_controller_start()
 * before appman_config_append_rte_env(self->_priv->pAppmanConfigObject, pEnv);
 */

if (1) {
    FILE *fp = fopen("/tmp/nm.env", "rt");
    char buf[1024 * 2];
    int i, len;

    gchar* env[2];

    printf("auv: nm.env exists\n");
    if (fp) {
        while (fgets(buf, sizeof(buf), fp)) {
            if (strncmp(buf, "export ", 7))
                continue;

            len = strlen(buf);
            for (i = len - 1; i >= 0; i--) {
                if (isspace(buf[i]))
                    continue;
                buf[i + 1] = '\0';
                break;
            }

            env[0] = &buf[7];
            env[1] = NULL;

            printf("auv: export = '%s'\n", env[0]);
            appman_config_append_rte_env(self->_priv->pAppmanConfigObject, env);
        }
        fclose(fp);
    }
}

